import{r as s,j as e}from"./index-foqNuVZ0.js";const F=()=>{const[i,y]=s.useState(null),[j,b]=s.useState([]),[l,v]=s.useState("overview"),[c,S]=s.useState("7d"),[d,C]=s.useState(""),[z,g]=s.useState(!1),B=["DeFi Analysis","Technical Analysis","Sentiment Analysis","Risk Assessment","Market Making","Governance","On-Chain Analysis"],a=[{name:"Novice",min:0,max:999,color:"#9CA3AF",icon:"🌱"},{name:"Apprentice",min:1e3,max:2499,color:"#10B981",icon:"📚"},{name:"Analyst",min:2500,max:4999,color:"#3B82F6",icon:"📊"},{name:"Expert",min:5e3,max:7499,color:"#8B5CF6",icon:"🎯"},{name:"Master",min:7500,max:9499,color:"#F59E0B",icon:"👑"},{name:"Legend",min:9500,max:1e4,color:"#EF4444",icon:"⭐"}];s.useEffect(()=>{f()},[]),s.useEffect(()=>{d&&(w(),A())},[d,c]);const f=async()=>{if(typeof window.ethereum<"u")try{const t=await window.ethereum.request({method:"eth_requestAccounts"});C(t[0])}catch(t){console.error("Error connecting wallet:",t)}},w=async()=>{if(d)try{g(!0);const o=await(await fetch(`/api/reputation/${d}?timeframe=${c}`)).json();y(o)}catch(t){console.error("Error fetching reputation:",t)}finally{g(!1)}},A=async()=>{try{const o=await(await fetch(`/api/reputation/leaderboard?timeframe=${c}&limit=50`)).json();b(o)}catch(t){console.error("Error fetching leaderboard:",t)}},x=t=>a.find(o=>t>=o.min&&t<=o.max)||a[0],R=t=>{const o=x(t),r=a.findIndex(k=>k.name===o.name);return r<a.length-1?a[r+1]:null},L=t=>{const o=x(t),r=(t-o.min)/(o.max-o.min);return Math.max(0,Math.min(1,r))*100},p=t=>{switch(t){case"common":return"#9CA3AF";case"rare":return"#3B82F6";case"epic":return"#8B5CF6";case"legendary":return"#F59E0B";default:return"#9CA3AF"}},m=t=>`${t>0?"+":""}${t}`,u=t=>{switch(t){case"accurate_vote":return"✅";case"inaccurate_vote":return"❌";case"content_creation":return"📝";case"early_adoption":return"🚀";case"liquidity_provision":return"💧";case"community_moderation":return"🛡️";case"expert_analysis":return"🔍";case"ai_model_contribution":return"🤖";default:return"📊"}};if(!d)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontFamily:"Inter, sans-serif",backgroundColor:"#0f0f0f",color:"#ffffff"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"24px",marginBottom:"20px"},children:"Connect Your Wallet"}),e.jsx("p",{style:{color:"#aaa",marginBottom:"20px"},children:"Connect your wallet to view your reputation dashboard"}),e.jsx("button",{onClick:f,style:{padding:"12px 24px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},children:"Connect Wallet"})]})});if(z||!i)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",fontFamily:"Inter, sans-serif",backgroundColor:"#0f0f0f",color:"#ffffff"},children:e.jsx("div",{children:"Loading reputation data..."})});const n=x(i.totalScore),h=R(i.totalScore),W=L(i.totalScore);return e.jsxs("div",{style:{fontFamily:"Inter, sans-serif",padding:"20px",maxWidth:"1400px",margin:"0 auto",backgroundColor:"#0f0f0f",color:"#ffffff"},children:[e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsx("h1",{style:{fontSize:"32px",fontWeight:"bold",margin:"0 0 10px 0"},children:"Reputation Dashboard"}),e.jsx("p",{style:{color:"#aaa",margin:0},children:"Track your community contributions and expertise recognition"})]}),e.jsxs("div",{style:{background:`linear-gradient(135deg, ${n.color}20, ${n.color}10)`,border:`2px solid ${n.color}`,borderRadius:"16px",padding:"30px",marginBottom:"30px",position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{fontSize:"48px"},children:n.icon}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"28px",color:n.color},children:n.name}),e.jsxs("p",{style:{margin:0,fontSize:"18px",fontWeight:"bold"},children:[i.totalScore.toLocaleString()," Reputation Points"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:n.color},children:["#",i.rankingPosition]}),e.jsx("div",{style:{fontSize:"14px",color:"#aaa"},children:"Global Rank"})]})]}),h&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsxs("span",{style:{fontSize:"14px",fontWeight:"bold"},children:["Progress to ",h.name]}),e.jsxs("span",{style:{fontSize:"14px"},children:[i.totalScore," / ",h.min]})]}),e.jsx("div",{style:{width:"100%",height:"12px",backgroundColor:"#333",borderRadius:"6px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${W}%`,height:"100%",backgroundColor:n.color,borderRadius:"6px"}})})]}),i.isInfluencer&&e.jsx("div",{style:{position:"absolute",top:"20px",right:"20px",padding:"8px 16px",backgroundColor:"#F59E0B",color:"white",borderRadius:"20px",fontSize:"14px",fontWeight:"bold"},children:"🌟 Influencer"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsxs("div",{style:{border:"1px solid #444",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#10B981"},children:i.votingAccuracy.toLocaleString()}),e.jsx("div",{style:{fontSize:"14px",color:"#aaa"},children:"Voting Accuracy"})]}),e.jsxs("div",{style:{border:"1px solid #444",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#3B82F6"},children:i.communityContribution.toLocaleString()}),e.jsx("div",{style:{fontSize:"14px",color:"#aaa"},children:"Community Points"})]}),e.jsxs("div",{style:{border:"1px solid #444",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#8B5CF6"},children:i.aiValidationScore.toLocaleString()}),e.jsx("div",{style:{fontSize:"14px",color:"#aaa"},children:"AI Validation Score"})]}),e.jsxs("div",{style:{border:"1px solid #444",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#F59E0B"},children:i.followerCount.toLocaleString()}),e.jsx("div",{style:{fontSize:"14px",color:"#aaa"},children:"Followers"})]})]}),e.jsx("div",{style:{marginBottom:"30px"},children:e.jsx("div",{style:{display:"flex",gap:"5px",borderBottom:"1px solid #444"},children:["overview","expertise","activities","achievements"].map(t=>e.jsx("button",{onClick:()=>v(t),style:{padding:"12px 24px",border:"none",backgroundColor:l===t?"#2563eb":"transparent",color:l===t?"white":"#aaa",borderRadius:"8px 8px 0 0",cursor:"pointer",fontSize:"14px",fontWeight:"bold",textTransform:"capitalize"},children:t},t))})}),l==="overview"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"30px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:"20px"},children:"Recent Activities"}),e.jsx("div",{children:i.recentActivities.slice(0,10).map((t,o)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"15px",border:"1px solid #444",borderRadius:"8px",marginBottom:"10px"},children:[e.jsx("div",{style:{fontSize:"24px",marginRight:"15px"},children:u(t.actionType)}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:t.actionType.replace("_"," ").replace(/\b\w/g,r=>r.toUpperCase())}),e.jsxs("div",{style:{fontSize:"12px",color:"#aaa"},children:[new Date(t.timestamp).toLocaleDateString(),t.aiValidated&&e.jsxs("span",{style:{marginLeft:"10px",color:"#10B981"},children:["✓ AI Validated (",t.confidenceScore,"%)"]})]})]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:t.scoreChange>0?"#10B981":"#EF4444"},children:m(t.scoreChange)})]},o))})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:"20px"},children:"Leaderboard"}),e.jsx("div",{children:j.slice(0,10).map((t,o)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px",border:"1px solid #444",borderRadius:"8px",marginBottom:"8px",backgroundColor:t.address.toLowerCase()===d.toLowerCase()?"#1f2937":"#0f0f0f"},children:[e.jsx("div",{style:{width:"30px",textAlign:"center",fontWeight:"bold",color:o<3?"#F59E0B":"#aaa"},children:t.rank}),e.jsxs("div",{style:{flex:1,marginLeft:"10px"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"14px"},children:t.ensName||`${t.address.slice(0,6)}...${t.address.slice(-4)}`}),e.jsxs("div",{style:{fontSize:"12px",color:"#aaa"},children:[t.totalScore.toLocaleString()," points"]})]}),e.jsxs("div",{style:{fontSize:"12px",color:t.change>0?"#10B981":t.change<0?"#EF4444":"#aaa"},children:[t.change>0?"↗":t.change<0?"↘":"→"," ",Math.abs(t.change)]})]},t.address))})]})]}),l==="expertise"&&e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:"20px"},children:"Expertise Areas"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:B.map(t=>{const o=i.expertiseAreas[t]||0,r=o>=70;return e.jsxs("div",{style:{border:`2px solid ${r?"#10B981":"#444"}`,borderRadius:"12px",padding:"20px",backgroundColor:r?"#1f2937":"#0f0f0f"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[e.jsx("h4",{style:{margin:0,fontSize:"16px",fontWeight:"bold"},children:t}),r&&e.jsx("span",{style:{padding:"4px 8px",backgroundColor:"#10B981",color:"white",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:"Expert"})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{style:{fontSize:"14px"},children:"Expertise Level"}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:"bold"},children:[o,"/100"]})]}),e.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#333",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${o}%`,height:"100%",backgroundColor:r?"#10B981":"#3B82F6",borderRadius:"4px"}})})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#aaa"},children:[o<30&&"Beginner level - Keep learning!",o>=30&&o<70&&"Intermediate level - You're making progress!",o>=70&&"Expert level - Outstanding expertise!"]})]},t)})})]}),l==="activities"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",margin:0},children:"Activity History"}),e.jsxs("select",{value:c,onChange:t=>S(t.target.value),style:{padding:"8px 12px",border:"1px solid #444",borderRadius:"6px",fontSize:"14px",backgroundColor:"#0f0f0f",color:"#aaa"},children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"all",children:"All time"})]})]}),e.jsx("div",{children:i.recentActivities.map((t,o)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"15px",border:"1px solid #444",borderRadius:"8px",marginBottom:"10px"},children:[e.jsx("div",{style:{fontSize:"24px",marginRight:"15px"},children:u(t.actionType)}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:t.actionType.replace("_"," ").replace(/\b\w/g,r=>r.toUpperCase())}),e.jsx("div",{style:{fontSize:"12px",color:"#aaa",marginBottom:"4px"},children:new Date(t.timestamp).toLocaleString()}),t.evidenceHash&&e.jsxs("div",{style:{fontSize:"10px",color:"#888"},children:["Evidence: ",t.evidenceHash.slice(0,10),"..."]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:t.scoreChange>0?"#10B981":"#EF4444"},children:m(t.scoreChange)}),t.aiValidated&&e.jsxs("div",{style:{fontSize:"10px",color:"#10B981"},children:["AI Validated (",t.confidenceScore,"%)"]})]})]},o))})]}),l==="achievements"&&e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:"20px"},children:"Achievements & Badges"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},children:i.achievements.map(t=>e.jsxs("div",{style:{border:`2px solid ${p(t.rarity)}`,borderRadius:"12px",padding:"20px",backgroundColor:"#0f0f0f",textAlign:"center",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:"10px",right:"10px",padding:"4px 8px",backgroundColor:p(t.rarity),color:"white",borderRadius:"12px",fontSize:"10px",fontWeight:"bold",textTransform:"capitalize"},children:t.rarity}),e.jsx("div",{style:{fontSize:"48px",marginBottom:"10px"},children:t.icon}),e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"16px",fontWeight:"bold"},children:t.name}),e.jsx("p",{style:{margin:"0 0 15px 0",fontSize:"12px",color:"#aaa",lineHeight:1.4},children:t.description}),t.progress!==void 0&&t.maxProgress&&e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{style:{fontSize:"12px"},children:"Progress"}),e.jsxs("span",{style:{fontSize:"12px"},children:[t.progress,"/",t.maxProgress]})]}),e.jsx("div",{style:{width:"100%",height:"6px",backgroundColor:"#333",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${t.progress/t.maxProgress*100}%`,height:"100%",backgroundColor:p(t.rarity),borderRadius:"3px"}})})]}),e.jsxs("div",{style:{fontSize:"10px",color:"#888"},children:["Earned: ",new Date(t.earnedAt).toLocaleDateString()]})]},t.id))})]})]})};export{F as default};
